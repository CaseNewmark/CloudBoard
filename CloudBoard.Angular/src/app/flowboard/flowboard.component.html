<div class="toolbar-container">
    <toolbar></toolbar>
</div>
@if (!currentCloudBoard) {
    <div class="d-flex justify-content-center align-items-center vh-100">
    <i>No Cloudboard loaded yet..</i>
    </div>
}
@else {
    <f-flow fDraggable>
        <f-canvas>
            <!-- Render all connections from the cloudboard data -->
            @for (connector of currentCloudBoard.connectors; track connector.id) {
                <f-connection 
                    [fOutputId]="connector.fromNodeId" 
                    [fInputId]="connector.toNodeId">
                </f-connection>
            }

            <!-- Render all nodes from the cloudboard data -->
            @for (node of currentCloudBoard.nodes; track node.id) {
                <div 
                    fNode 
                    fDragHandle 
                    [fNodePosition]="node.position"
                    (fNodePositionChange)="onNodePositionChanged($event, node)"
                    fNodeOutput 
                    [fOutputId]="node.id"
                    fOutputConnectableSide="right"
                    fNodeInput
                    [fInputId]="node.id"
                    fInputConnectableSide="left">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title">{{ node.name }}</h5>
                        </div>
                        <div class="card-body">
                            <p class="card-text"><i>Nothing to see here</i></p>
                            <button type="button" class="btn btn-primary">Edit</button>

                        </div>
                    </div>
                    <div fNodeOutput fOutputId="fOutput1" class="connector right"></div>
                    <div fNodeInput fInputId="fInput1" class="connector left"></div>
                </div>
            }
        </f-canvas>
    </f-flow>
}